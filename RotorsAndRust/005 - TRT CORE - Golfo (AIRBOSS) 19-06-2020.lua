-- Script by "Pikey" Jun 2018. To be used with MOOSE by Sven "FlightControl" & Community. Do not reuse without keeping this credit header.
-- v2 (no detection)
-- v3 no player check edition by ECV56_Mith 13/10/2019--
-----------------------------------------------------------------------------------------------------------------------------------------
--↓↓ ZONES ↓↓-------------------------------------------------------------------------------------------------------------------------------------------------------
zone1 = ZONE:New("Zona 001")
zone2 = ZONE:New("Zona 002")
zone3 = ZONE:New("Zona 003")
zone4 = ZONE:New("Zona 004")
zone5 = ZONE:New("Zona 005")
zone6 = ZONE:New("Zona 006")
zone7 = ZONE:New("Zona 007")
zone8 = ZONE:New("Zona 008")
zone9 = ZONE:New("Zona 009")
zone10 = ZONE:New("Zona 010")
zone11 = ZONE:New("Zona 011")
zone12 = ZONE:New("Zona 012")
zone13 = ZONE:New("Zona 013")
zone14 = ZONE:New("Zona 014")
zone15 = ZONE:New("Zona 015")
zone16 = ZONE:New("Zona 016")
zone17 = ZONE:New("Zona 017")
zone18 = ZONE:New("Zona 018")
zone19 = ZONE:New("Zona 019")
zone20 = ZONE:New("Zona 020")
zone21 = ZONE:New("Zona 021")
zone22 = ZONE:New("Zona 022")
zone23 = ZONE:New("Zona 023")
zone24 = ZONE:New("Zona 024")
zone25 = ZONE:New("Zona 025")
zone26 = ZONE:New("Zona 026")
zone27 = ZONE:New("Zona 027")
zone28 = ZONE:New("Zona 028")
zone29 = ZONE:New("Zona 029")
zone30 = ZONE:New("Zona 030")
zone31 = ZONE:New("Zona 031")
zone32 = ZONE:New("Zona 032")
zone33 = ZONE:New("Zona 033")
zone34 = ZONE:New("Zona 034")
zone35 = ZONE:New("Zona 035")
zone36 = ZONE:New("Zona 036")
zone37 = ZONE:New("Zona 037")
zone38 = ZONE:New("Zona 038")
zone39 = ZONE:New("Zona 039")
zone40 = ZONE:New("Zona 040")
zone41 = ZONE:New("Zona 041")
zone42 = ZONE:New("Zona 042")
zone43 = ZONE:New("Zona 043")
zone44 = ZONE:New("Zona 044")
zone45 = ZONE:New("Zona 045")
zone46 = ZONE:New("Zona 046")
zone47 = ZONE:New("Zona 047")
zone48 = ZONE:New("Zona 048")
zone49 = ZONE:New("Zona 049")
zone50 = ZONE:New("Zona 050")
zone51 = ZONE:New("Zona 051")
zone52 = ZONE:New("Zona 052")
zone53 = ZONE:New("Zona 053")
zone54 = ZONE:New("Zona 054")
zone55 = ZONE:New("Zona 055")
zone56 = ZONE:New("Zona 056")
zone57 = ZONE:New("Zona 057")
zone58 = ZONE:New("Zona 058")
zone59 = ZONE:New("Zona 059")
zone60 = ZONE:New("Zona 060")
zone61 = ZONE:New("Zona 061")
zone62 = ZONE:New("Zona 062")
zone63 = ZONE:New("Zona 063")
zone64 = ZONE:New("Zona 064")
zone65 = ZONE:New("Zona 065")
zone66 = ZONE:New("Zona 066")
zone67 = ZONE:New("Zona 067")
zone68 = ZONE:New("Zona 068")
zone69 = ZONE:New("Zona 069")
zone70 = ZONE:New("Zona 070")
zone71 = ZONE:New("Zona 071")
zone72 = ZONE:New("Zona 072")
zone73 = ZONE:New("Zona 073")
zone74 = ZONE:New("Zona 074")
zone75 = ZONE:New("Zona 075")
zone76 = ZONE:New("Zona 076")
zone77 = ZONE:New("Zona 077")
zone78 = ZONE:New("Zona 078")
zone79 = ZONE:New("Zona 079")
zone80 = ZONE:New("Zona 080")
zone81 = ZONE:New("Zona 081")
zone82 = ZONE:New("Zona 082")
zone83 = ZONE:New("Zona 083")
zone84 = ZONE:New("Zona 084")
zone85 = ZONE:New("Zona 085")
zone86 = ZONE:New("Zona 086")
zone87 = ZONE:New("Zona 087")
zone88 = ZONE:New("Zona 088")
zone89 = ZONE:New("Zona 089")
zone90 = ZONE:New("Zona 090")
zone91 = ZONE:New("Zona 091")
zone92 = ZONE:New("Zona 092")
zone93 = ZONE:New("Zona 093")
zone94 = ZONE:New("Zona 094")
zone95 = ZONE:New("Zona 095")
zone96 = ZONE:New("Zona 096")
zone97 = ZONE:New("Zona 097")
zone98 = ZONE:New("Zona 098")
zone99 = ZONE:New("Zona 099")
zone100 = ZONE:New("Zona 100")
zone101 = ZONE:New("Zona 101")
zone102 = ZONE:New("Zona 102")
zone103 = ZONE:New("Zona 103")
zone104 = ZONE:New("Zona 104")
zone105 = ZONE:New("Zona 105")
zone106 = ZONE:New("Zona 106")
zone107 = ZONE:New("Zona 107")
zone108 = ZONE:New("Zona 108")
zone109 = ZONE:New("Zona 109")
zone110 = ZONE:New("Zona 110")
zone111 = ZONE:New("Zona 111")
zone112 = ZONE:New("Zona 112")
zone113 = ZONE:New("Zona 113")
zone114 = ZONE:New("Zona 114")
zone115 = ZONE:New("Zona 115")
zone116 = ZONE:New("Zona 116")
zone117 = ZONE:New("Zona 117")
zone118 = ZONE:New("Zona 118")
zone119 = ZONE:New("Zona 119")
zone120 = ZONE:New("Zona 120")
zone121 = ZONE:New("Zona 121")
zone122 = ZONE:New("Zona 122")
zone123 = ZONE:New("Zona 123")
zone124 = ZONE:New("Zona 124")
zone125 = ZONE:New("Zona 125")
zone126 = ZONE:New("Zona 126")
zone127 = ZONE:New("Zona 127")
zone128 = ZONE:New("Zona 128")
zone129 = ZONE:New("Zona 129")
zone130 = ZONE:New("Zona 130")
zone131 = ZONE:New("Zona 131")
zone132 = ZONE:New("Zona 132")
zone133 = ZONE:New("Zona 133")
zone134 = ZONE:New("Zona 134")
zone135 = ZONE:New("Zona 135")
zone136 = ZONE:New("Zona 136")
zone137 = ZONE:New("Zona 137")
zone138 = ZONE:New("Zona 138")
zone139 = ZONE:New("Zona 139")
zone140 = ZONE:New("Zona 140")
zone141 = ZONE:New("Zona 141")
zone142 = ZONE:New("Zona 142")
zone143 = ZONE:New("Zona 143")
zone144 = ZONE:New("Zona 144")
zone145 = ZONE:New("Zona 145")
zone146 = ZONE:New("Zona 146")
zone147 = ZONE:New("Zona 147")
zone148 = ZONE:New("Zona 148")
zone149 = ZONE:New("Zona 149")
zone150 = ZONE:New("Zona 150")

HeliZone1 = ZONE:New("ZonaHELI 001")
HeliZone2 = ZONE:New("ZonaHELI 002")
HeliZone3 = ZONE:New("ZonaHELI 003")
HeliZone4 = ZONE:New("ZonaHELI 004")
HeliZone5 = ZONE:New("ZonaHELI 005")
HeliZone6 = ZONE:New("ZonaHELI 006")
HeliZone7 = ZONE:New("ZonaHELI 007")
HeliZone8 = ZONE:New("ZonaHELI 008")
HeliZone9 = ZONE:New("ZonaHELI 009")
HeliZone10 = ZONE:New("ZonaHELI 010")
HeliZone11 = ZONE:New("ZonaHELI 011")
HeliZone12 = ZONE:New("ZonaHELI 012")
HeliZone13 = ZONE:New("ZonaHELI 013")
HeliZone14 = ZONE:New("ZonaHELI 014")
HeliZone15 = ZONE:New("ZonaHELI 015")
HeliZone16 = ZONE:New("ZonaHELI 016")
HeliZone17 = ZONE:New("ZonaHELI 017")
HeliZone18 = ZONE:New("ZonaHELI 018")
HeliZone19 = ZONE:New("ZonaHELI 019")
HeliZone20 = ZONE:New("ZonaHELI 020")
HeliZone21 = ZONE:New("ZonaHELI 021")
HeliZone22 = ZONE:New("ZonaHELI 022")
HeliZone23 = ZONE:New("ZonaHELI 023")
HeliZone24 = ZONE:New("ZonaHELI 024")
HeliZone25 = ZONE:New("ZonaHELI 025")
HeliZone26 = ZONE:New("ZonaHELI 026")
HeliZone27 = ZONE:New("ZonaHELI 027")
HeliZone28 = ZONE:New("ZonaHELI 028")
HeliZone29 = ZONE:New("ZonaHELI 029")
HeliZone30 = ZONE:New("ZonaHELI 030")
HeliZone31 = ZONE:New("ZonaHELI 031")
HeliZone32 = ZONE:New("ZonaHELI 032")
HeliZone33 = ZONE:New("ZonaHELI 033")
HeliZone34 = ZONE:New("ZonaHELI 034")
HeliZone35 = ZONE:New("ZonaHELI 035")
HeliZone36 = ZONE:New("ZonaHELI 036")
HeliZone37 = ZONE:New("ZonaHELI 037")
HeliZone38 = ZONE:New("ZonaHELI 038")
HeliZone39 = ZONE:New("ZonaHELI 039")
HeliZone40 = ZONE:New("ZonaHELI 040")


navzone1 = ZONE:New("ZONA NAVAL 01")
navzone2 = ZONE:New("ZONA NAVAL 02")
navzone3 = ZONE:New("ZONA NAVAL 03")
navzone4 = ZONE:New("ZONA NAVAL 04")
navzone5 = ZONE:New("ZONA NAVAL 05")
navzone6 = ZONE:New("ZONA NAVAL 06")
navzone7 = ZONE:New("ZONA NAVAL 07")
navzone8 = ZONE:New("ZONA NAVAL 08")
navzone9 = ZONE:New("ZONA NAVAL 09")
navzone10 = ZONE:New("ZONA NAVAL 10")

--↓↓ TABLES ↓↓------------------------------------------------------------------------------------------------------------------------------------------------------
BriefingBAITable = {
"Recon has identified enemy troops using this facility. Command has authorised an immediate strike.", 
"Command has observed this target from satellite reconnaissance and ordered a strike.",
"Previous airstrikes on this target have failed and the target is now available for replanning.",
"This is a key OPFOR strategic target. Command has designated it for explosive disaassembly.",
"SIGINT has identified this target as critical to OPFOR C3. Immediate schwacking authorised.",
}

BriefingSEADTable = {
"OPFOR air defenses pose a significant threat in the target area. Command has ordered a SEAD strike.", 
"Several packages have been lost in the target area, and reduction of OPFOR's defensive capacity is a command priority.",
"Recon teams have identified a previously undiscovered SAM site. SEAD authorised.",
"Satellite reconnaissance has marked a new SAM site. HQ wants those radars disabled as soon as possible.",
}

BriefingNAVTable = {
"Enemy ship in the area. Command orders its neutralisation.", 
"A new group of ships is in the area, engage them ASAP!",
"The presence of a new OPFOR vessel was detected in the area. Destroy it.",
"This ship escaped our attempts to destroy it several times, sink it once and for all.",
}


TemplateZones = {zone1,zone2,zone3,zone4, zone5, zone6, zone7, zone8, zone9, zone10, zone11, zone12, zone13, zone14, zone15, zone16, zone17, zone18, zone19, zone20, zone21, zone22, zone23, zone24, zone25, zone26, zone27, zone28, zone29, zone30, zone31, zone32, zone33,zone34, zone35, zone36, zone37, zone38, zone39, zone40, zone41, zone42, zone43, zone44, zone45, zone46, zone47, zone48, zone49, zone50, zone51, zone52, zone53, zone54, zone55, zone56, zone57, zone58, zone59, zone60, zone61, zone62, zone63, zone64, zone65, zone66, zone67, zone68, zone69, zone70, zone71, zone72, zone73, zone74, zone75, zone76, zone77, zone78, zone79, zone80, zone81, zone82, zone83, zone84, zone85, zone86, zone87, zone88, zone89, zone90, zone91, zone92, zone93, zone94, zone95, zone96, zone97, zone98, zone99, zone100, zone101, zone102, zone103, zone104, zone105, zone106, zone107, zone108, zone109, zone110, zone111, zone112, zone113, zone114, zone115, zone116, zone117, zone118, zone119, zone120, zone121, zone122, zone123, zone124, zone125, zone126, zone127, zone128, zone129, zone130, zone131, zone132, zone133, zone134, zone135, zone136, zone137, zone138, zone139, zone140, zone141, zone142, zone143, zone144, zone145, zone146, zone147, zone148, zone149, zone150}
TemplateHELOZones = {HeliZone1, HeliZone2, HeliZone3, HeliZone4, HeliZone5, HeliZone6, HeliZone7, HeliZone8, HeliZone9, HeliZone10, HeliZone11, HeliZone12, HeliZone13, HeliZone14, HeliZone15, HeliZone16, HeliZone17, HeliZone18, HeliZone19, HeliZone20, HeliZone21, HeliZone22, HeliZone23, HeliZone24, HeliZone25, HeliZone26, HeliZone27, HeliZone28, HeliZone29, HeliZone30, HeliZone31, HeliZone32, HeliZone33, HeliZone34, HeliZone35, HeliZone36, HeliZone37, HeliZone38, HeliZone39, HeliZone40}
TemplateNavalZones = {navzone1, navzone2, navzone3, navzone4, navzone5, navzone6,navzone7,navzone8,navzone9,navzone10}
TemplateBAI = {"Template0001","Template0002","Template0003","Template0004","Template0005","Template0006","Template0007","Template0008","Template0009","Template0010","Template0011","fob1_red","fob2_red","fob3_red","fob5_red","fob6_red", "Template0012", "Template0013", "Template0014", "Template0015", "Template0016", "Template0017"}
TemplateHELOBAI = {"Template0001", "Template0003", "Template0005", "Template0006", "Template0008", "Template0010", "Template0012", "HELI_Template0001", "HELI_Template0002", "HELI_Template0003", "HELI_Template0004", "HELI_Template0005", "HELI_Template0006"}
TemplateBAIHARD = {"BAIHARD0001","BAIHARD0002","BAIHARD0003","BAIHARD0004","BAIHARD0005"}
TemplateNavBAI = {"Navtgt 0001","Navtgt 0002","Navtgt 0003", "Navtgt 0004", "Navtgt 0005", "Navtgt 0006"}
--SEAD_GROUPS = {"s3_red", "s2_red", "s6_red", "hawk_red", "buk_red", "s11_red", "s10_red"}
ColourTable = {"Red","White","Black","Yellow","Green","Blue","Purple","Orange","Grey","Ivory","Jade","Scarlet","Silver","Deadly","Lively","Rough","Smooth","Bright","Insane","Cheap","Cruel","Dirty","Exhausted","Fat","Hollow","Hot","Huge","Loud","Messy","Quick","Quiet","Serious","Sharp","Solid","Spicy","Strange","Sudden","Tight","Violent","Wet","Ugly","Wise"}
NounTable = {"Scorpion","Leopard","Dog","Tiger","Pig","Wolf","Warlock","Shaman","Paladin","Warrior","Druid","Rogue","Samurai","Assassin","Sniper","Marksman","Frost","Fire","Tornado","Affliction","Fury","Hands","Windwalker","Retribution","Blood","Cat","Cow","Hole","Snake","Rain","Sand","Sister","Soldier","War","Solution","Star"}

--↓↓ TABLES / ARRAYS ↓↓---------------------------------------------------------------------------------------------------------------------------------------------
BAI={}
BAIHARD={}
NavBAI={}
SEAD={}
HELOBAI = {}
TargetSetUnitBAI={}
TargetSetUnitBAIHARD={}
TargetSetUnitNavBAI={}
TargetSetUnitSEAD={}
TargetSetUnitHELO_BAI = {}
TaskBAI={}
TaskBAIHARD={}
TaskNavBAI={}
TaskSEAD={}
TaskHELOBAI = {}
TaskTableBAI={}
TaskTableBAIHARD={}
TaskTableSEAD={}
TaskTableNavBAI={}
TaskTable_CSAR={}
TaskTable_HELO_BAI = {}
BAIJTAC={}
BAIHARDJTAC={}
SEADJTAC={}
ClientSet={}
--↓↓ CUSTOM FUNCTIONS ↓↓--------------------------------------------------------------------------------------------------------------------------------------------
function RandOpName()
local Colour = ColourTable[math.random(1,table.getn(ColourTable))]
local Noun = NounTable[math.random(1,table.getn(NounTable))]
return Colour .." ".. Noun
end

function RandSQDN_name()
  local Colour = ColourTable[math.random(1,table.getn(ColourTable))]
  local Noun = NounTable[math.random(1,table.getn(NounTable))]
  return Colour .." ".. Noun
  end

function MissionTextBAI()
local Briefing = BriefingBAITable[math.random(1,table.getn(BriefingBAITable))]
return Briefing
end

function MissionTextNAV()
local Briefing = BriefingNAVTable[math.random(1,table.getn(BriefingNAVTable))]
return Briefing
end

function MissionTextSEAD()
local Briefing = BriefingSEADTable[math.random(1,table.getn(BriefingSEADTable))]
return Briefing
end

function randomnumber()
local rng = math.random(1,100000)
return rng
end

function randomcolor()
local color = math.random(0,4)
return color
end

function CountTableBAI(Table)   
   local count = 0
    for k,v in pairs(Table) do
      count = count + 1
    end
    return count
end

function CountTableBAIHARD(Table)   
   local count = 0
    for k,v in pairs(Table) do
      count = count + 1
    end
    return count
end

function CountTableNavBAI(Table)   
   local count = 0
    for k,v in pairs(Table) do
      count = count + 1
    end
    return count
end

function CountTableSEAD(Table)   
   local count = 0
    for k,v in pairs(Table) do
      count = count + 1
    end
    return count
end

function CountTableHELOBAI(Table)   
  local count = 0
   for k,v in pairs(Table) do
     count = count + 1
   end
   return count
end

function CountTableHELOCSAR(Table)   
  local count = 0
   for k,v in pairs(Table) do
     count = count + 1
   end
   return count
end

function AliveSet(set) 
  local count = 0
  set:ForEachClient(
  function (setclient)
   if setclient:IsAlive() then
    count=count+1
   end
  end)
  return count
end

function Serialise(object)
local Resulttable = routines.utils.oneLineSerialize(object)
return Resulttable
end

--↓↓ HEADQUARTERS ↓↓------------------------------------------------------------------------------------------------------------------------------------------------
local HQ = GROUP:FindByName("☮ TRTCentralHQ")
local CommandCenterA2G = COMMANDCENTER:New( HQ, "TRT A2G Ops " )
CommandCenterA2G.FlashStatus = false
local CommandCenterHELI = COMMANDCENTER:New( HQ, "TRT HELO Ops" )
CommandCenterHELI.FlashStatus = false
local TRTPlanes = SET_GROUP:New():FilterCoalitions( "blue" ):FilterPrefixes( "✈" ):FilterStart()
local TRTHelis = SET_GROUP:New():FilterCoalitions( "blue" ):FilterCategories("helicopter"):FilterPrefixes( "✈" ):FilterStart()

if enable_A2G_tasking == true then
    --↓↓ BAI TASK ↓↓----------------------------------------------------------------------------------------------------------------------------------------------------
      function MakeTaskBAI()
      MissionBAI = MISSION:New( CommandCenterA2G, "STRIKE", "standard", MissionTextBAI(), coalition.side.BLUE )
    
      local RngNum = randomnumber()
       local RngCol = randomcolor()
      TargetSetUnitBAI[RngNum] = SET_UNIT:New():FilterCoalitions("red"):FilterPrefixes("✧ BAI" .. RngNum):FilterStart()
      local RNGzone1 = math.random(1,#(TemplateZones))
      local tempRandGroup1 = math.random(1,#(TemplateBAI))
      local tempGrpAlias1 = "✧ BAI" .. RngNum
      trigger.action.outText("MISSION UPDATE: New BAI task available",15)
      NEWBAI = USERSOUND:New( "TransmisionEntrante.ogg" )
      NEWBAI:ToCoalition( coalition.side.BLUE )
      
      BAI[RngNum] = SPAWN:NewWithAlias(TemplateBAI[tempRandGroup1], tempGrpAlias1)
        :OnSpawnGroup(
        function(SpawnGroup)
        local location1 = SpawnGroup:GetCoordinate() --get the Coordinate of the random spawn 
        local newlocation1 = location1:GetRandomVec2InRadius(10, 50) --make a new coord close by. Limitations of map and zone should be considered
        BAIJTAC = SPAWN:NewWithAlias( "jtac", "jtac  BAI-" .. RngNum):SpawnFromVec2(newlocation1) 
        BAIJTACName = BAIJTAC:GetName()
        JTACAutoLase(BAIJTACName, 1688, true, "all", RngCol)
      end)
      :SpawnInZone(TemplateZones[RNGzone1],true)
      table.remove(TemplateZones, RNGzone1)
      TaskBAI[RngNum] = TASK_A2G_BAI:New(MissionBAI,TRTPlanes,RandOpName(),TargetSetUnitBAI[RngNum])
      return TaskBAI[RngNum]
    end
    --↓↓ BAI HARD TASK ↓↓-----------------------------------------------------------------------------------------------------------------------------------------------
    function MakeTaskBAIHARD()
    MissionBAIHARD = MISSION:New( CommandCenterA2G, "STRIKE", "hard", MissionTextBAI(), coalition.side.BLUE ) --test
    
      local RngNum = randomnumber()
      local RngCol = randomcolor()
      TargetSetUnitBAIHARD[RngNum] = SET_UNIT:New():FilterCoalitions("red"):FilterPrefixes("☠ BAI " .. RngNum):FilterStart()
      local RNGzone4 = math.random(1,#(TemplateZones))
      local tempRandGroup4 = math.random(1,#(TemplateBAIHARD))
      local tempGrpAlias4 = "☠ BAI " .. RngNum
      trigger.action.outText("MISSION UPDATE: New BAI -Hard- task available",15)
      NEWBAIHARD = USERSOUND:New( "TransmisionEntrante.ogg" )
      NEWBAIHARD:ToCoalition( coalition.side.BLUE )
      
      BAIHARD[RngNum] = SPAWN:NewWithAlias(TemplateBAIHARD[tempRandGroup4], tempGrpAlias4)
        :OnSpawnGroup(
        function(SpawnGroup)
        local location2 = SpawnGroup:GetCoordinate() --get the Coordinate of the random spawn 
        local newlocation2 = location2:GetRandomVec2InRadius(10, 50) --make a new coord close by. Limitations of map and zone should be considered
        BAIHARDJTAC = SPAWN:NewWithAlias( "jtac", "jtac  BAI (hard)-" .. RngNum):SpawnFromVec2(newlocation2)
        BAIHardJTACName = BAIHARDJTAC:GetName()
        JTACAutoLase(BAIHardJTACName, 1688, true, "all", RngCol)	
      end)
      :SpawnInZone(TemplateZones[RNGzone4],true)
      table.remove(TemplateZones, RNGzone4)
      TaskBAIHARD[RngNum] = TASK_A2G_BAI:New(MissionBAIHARD,TRTPlanes,RandOpName(),TargetSetUnitBAIHARD[RngNum])
      return TaskBAIHARD[RngNum]
    end
    --↓↓ ANTISHIP TASK ↓↓-----------------------------------------------------------------------------------------------------------------------------------------------
    function MakeTaskNavBAI()
    MissionNavBAI = MISSION:New( CommandCenterA2G, "ANSTISHIP", "standard", MissionTextNAV(), coalition.side.BLUE )
    
      local RngNum = randomnumber()
      TargetSetUnitNavBAI[RngNum] = SET_UNIT:New():FilterCoalitions("red"):FilterPrefixes("⚓ NAVAL " .. RngNum):FilterStart()
      local RNGzone2 = math.random(1,#(TemplateNavalZones))
      local tempRandGroup3 = math.random(1,#(TemplateNavBAI))
      local tempGrpAlias3 = "⚓ NAVAL " .. RngNum
      trigger.action.outText("MISSION UPDATE: New ANTI SHIP task available",15)
      NEWBAIAS = USERSOUND:New( "TransmisionEntrante.ogg" )
      NEWBAIAS:ToCoalition( coalition.side.BLUE )
      
      NavBAI[RngNum] = SPAWN:NewWithAlias(TemplateNavBAI[tempRandGroup3], tempGrpAlias3)
      :SpawnInZone(TemplateNavalZones[RNGzone2],true)
      table.remove(TemplateNavalZones, RNGzone2)
      TaskNavBAI[RngNum] = TASK_A2G_BAI:New(MissionNavBAI,TRTPlanes,RandOpName(),TargetSetUnitNavBAI[RngNum])
      return TaskNavBAI[RngNum]
    end
    --↓↓ SEAD TASK ↓↓---------------------------------------------------------------------------------------------------------------------------------------------------
    function MakeTaskSEAD()
    MissionSEAD = MISSION:New( CommandCenterA2G, "SEAD", "standard", MissionTextSEAD(), coalition.side.BLUE )
    
      local RngNum = randomnumber()
      local RngCol = randomcolor()
      TargetSetUnitSEAD[RngNum] = SET_UNIT:New():FilterCoalitions("red"):FilterPrefixes("✦ SEAD" .. RngNum):FilterStart()
      local RNGzone3 = math.random(1,#(TemplateZones))
      local tempRandGroup2 = math.random(1,#(SEAD_GROUPS))
      local tempGrpAlias2 = "✦ SEAD" .. RngNum
      trigger.action.outText("MISSION UPDATE: New SEAD task available",15)
      NEWSEAD = USERSOUND:New( "TransmisionEntrante.ogg" )
      NEWSEAD:ToCoalition( coalition.side.BLUE )
      
      SEAD[RngNum] = SPAWN:NewWithAlias(SEAD_GROUPS[tempRandGroup2], tempGrpAlias2)
        :OnSpawnGroup(
        function(SpawnGroup)
        local location1 = SpawnGroup:GetCoordinate() --get the Coordinate of the random spawn 
        local newlocation1 = location1:GetRandomVec2InRadius(10, 50) --make a new coord close by. Limitations of map and zone should be considered
        SEADJTAC = SPAWN:NewWithAlias( "jtac", "jtac  SEAD-" .. RngNum):SpawnFromVec2(newlocation1) 
        SEADJTACName = SEADJTAC:GetName()
        JTACAutoLase(SEADJTACName, 1688, true, "all", RngCol)
      end)
      :SpawnInZone(TemplateZones[RNGzone3],true)
      table.remove(TemplateZones, RNGzone3)
      TaskSEAD[RngNum] = TASK_A2G_SEAD:New(MissionSEAD,TRTPlanes,RandOpName(),TargetSetUnitSEAD[RngNum])
      return TaskSEAD[RngNum]
    end
    --
    --↓↓ SCHEDULER BAI ↓↓-----------------------------------------------------------------------------------------------------------------------------------------------
    TotalTasksbai = 0
    SCHEDULER:New( nil, function()
    local taskcount = CountTableBAI(TaskTableBAI)
        if taskcount < 1  and TotalTasksbai <15000 then
          LastTask = MakeTaskBAI()
          TotalTasksbai = TotalTasksbai + 1
          table.insert (TaskTableBAI,LastTask)
          TemplateZones ={zone1,zone2,zone3,zone4, zone5, zone6, zone7, zone8, zone9, zone10, zone11, zone12, zone13, zone14, zone15, zone16, zone17, zone18, zone19, zone20, zone21, zone22, zone23, zone24, zone25, zone26, zone27, zone28, zone29, zone30, zone31, zone32, zone33,zone34, zone35, zone36, zone37, zone38, zone39, zone40, zone41, zone42, zone43, zone44, zone45, zone46, zone47, zone48, zone49, zone50, zone51, zone52, zone53, zone54, zone55, zone56, zone57, zone58, zone59, zone60, zone61, zone62, zone63, zone64, zone65, zone66, zone67, zone68, zone69, zone70, zone71, zone72, zone73, zone74, zone75, zone76, zone77, zone78, zone79, zone80, zone81, zone82, zone83, zone84, zone85, zone86, zone87, zone88, zone89, zone90, zone91, zone92, zone93, zone94, zone95, zone96, zone97, zone98, zone99, zone100, zone101, zone102, zone103, zone104, zone105, zone106, zone107, zone108, zone109, zone110, zone111, zone112, zone113, zone114, zone115, zone116, zone117, zone118, zone119, zone120, zone121, zone122, zone123, zone124, zone125, zone126, zone127, zone128, zone129, zone130, zone131, zone132, zone133, zone134, zone135, zone136, zone137, zone138, zone139, zone140, zone141, zone142, zone143, zone144, zone145, zone146, zone147, zone148, zone149, zone150}
        elseif TotalTasksbai == 15000 then
         MESSAGE:New("The maximum Task Count has been reached for this mission. A restart is advised.", 10):ToAll()
        end
     
      for k,v in pairs(TaskTableBAI) do
        if v:IsStateCancelled() or v:IsStateFailed() or v:IsStateSuccess() or v:IsStateAborted() then
          MESSAGE:New("Task ".. k .. " is status "..v:GetStateString(), 10):ToAll()
          STATECHANGESND = USERSOUND:New( "MissionStateChange.ogg" )
          STATECHANGESND:ToCoalition( coalition.side.BLUE )
          table.remove(TaskTableBAI, k)
        if v:IsStateSuccess() then
          BAIJTACName1 = BAIJTAC:GetName()
          Group.getByName(BAIJTACName1):destroy()
        end 
        end
        end
      
    end, {}, 60, 20, 0.5)
    
    --↓↓ SCHEDULER BAI HARD↓↓-------------------------------------------------------------------------------------------------------------------------------------------
    TotalTasksbaihard = 0
    SCHEDULER:New( nil, function()
    local taskcount = CountTableBAIHARD(TaskTableBAIHARD)
        if taskcount < 1  and TotalTasksbaihard <15000 then
          LastTask = MakeTaskBAIHARD()
          TotalTasksbaihard = TotalTasksbaihard + 1
          table.insert (TaskTableBAIHARD,LastTask)
          TemplateZones ={zone1,zone2,zone3,zone4, zone5, zone6, zone7, zone8, zone9, zone10, zone11, zone12, zone13, zone14, zone15, zone16, zone17, zone18, zone19, zone20, zone21, zone22, zone23, zone24, zone25, zone26, zone27, zone28, zone29, zone30, zone31, zone32, zone33,zone34, zone35, zone36, zone37, zone38, zone39, zone40, zone41, zone42, zone43, zone44, zone45, zone46, zone47, zone48, zone49, zone50, zone51, zone52, zone53, zone54, zone55, zone56, zone57, zone58, zone59, zone60, zone61, zone62, zone63, zone64, zone65, zone66, zone67, zone68, zone69, zone70, zone71, zone72, zone73, zone74, zone75, zone76, zone77, zone78, zone79, zone80, zone81, zone82, zone83, zone84, zone85, zone86, zone87, zone88, zone89, zone90, zone91, zone92, zone93, zone94, zone95, zone96, zone97, zone98, zone99, zone100, zone101, zone102, zone103, zone104, zone105, zone106, zone107, zone108, zone109, zone110, zone111, zone112, zone113, zone114, zone115, zone116, zone117, zone118, zone119, zone120, zone121, zone122, zone123, zone124, zone125, zone126, zone127, zone128, zone129, zone130, zone131, zone132, zone133, zone134, zone135, zone136, zone137, zone138, zone139, zone140, zone141, zone142, zone143, zone144, zone145, zone146, zone147, zone148, zone149, zone150}
        elseif TotalTasksbaihard == 15000 then
         MESSAGE:New("The maximum Task Count has been reached for this mission. A restart is advised.", 10):ToAll()
        end
     
      for k,v in pairs(TaskTableBAIHARD) do
        if v:IsStateCancelled() or v:IsStateFailed() or v:IsStateSuccess() or v:IsStateAborted() then
          MESSAGE:New("Task ".. k .. " is status "..v:GetStateString(), 10):ToAll()
          STATECHANGESND = USERSOUND:New( "MissionStateChange.ogg" )
          STATECHANGESND:ToCoalition( coalition.side.BLUE )
          table.remove(TaskTableBAIHARD, k)
        if v:IsStateSuccess() then
          BAIhardJTACName1 = BAIHARDJTAC:GetName()
          Group.getByName(BAIhardJTACName1):destroy()
        end 
        end
        end
      
    end, {}, 90, 20, 0.5)
    
    
    --↓↓ SCHEDULER SEAD ↓↓----------------------------------------------------------------------------------------------------------------------------------------------
    TotalTaskssead = 0
    SCHEDULER:New( nil, function()
    local taskcount = CountTableSEAD(TaskTableSEAD)
        if taskcount < 1  and TotalTaskssead <15000 then
          LastTask = MakeTaskSEAD()
          TotalTaskssead = TotalTaskssead + 1
          table.insert (TaskTableSEAD,LastTask)
          TemplateZones ={zone1,zone2,zone3,zone4, zone5, zone6, zone7, zone8, zone9, zone10, zone11, zone12, zone13, zone14, zone15, zone16, zone17, zone18, zone19, zone20, zone21, zone22, zone23, zone24, zone25, zone26, zone27, zone28, zone29, zone30, zone31, zone32, zone33,zone34, zone35, zone36, zone37, zone38, zone39, zone40, zone41, zone42, zone43, zone44, zone45, zone46, zone47, zone48, zone49, zone50, zone51, zone52, zone53, zone54, zone55, zone56, zone57, zone58, zone59, zone60, zone61, zone62, zone63, zone64, zone65, zone66, zone67, zone68, zone69, zone70, zone71, zone72, zone73, zone74, zone75, zone76, zone77, zone78, zone79, zone80, zone81, zone82, zone83, zone84, zone85, zone86, zone87, zone88, zone89, zone90, zone91, zone92, zone93, zone94, zone95, zone96, zone97, zone98, zone99, zone100, zone101, zone102, zone103, zone104, zone105, zone106, zone107, zone108, zone109, zone110, zone111, zone112, zone113, zone114, zone115, zone116, zone117, zone118, zone119, zone120, zone121, zone122, zone123, zone124, zone125, zone126, zone127, zone128, zone129, zone130, zone131, zone132, zone133, zone134, zone135, zone136, zone137, zone138, zone139, zone140, zone141, zone142, zone143, zone144, zone145, zone146, zone147, zone148, zone149, zone150}
        elseif TotalTaskssead == 15000 then
         MESSAGE:New("The maximum Task Count has been reached for this mission. A restart is advised.", 10):ToAll()
        end
     
      for k,v in pairs(TaskTableSEAD) do
        if v:IsStateCancelled() or v:IsStateFailed() or v:IsStateSuccess() or v:IsStateAborted() then
          MESSAGE:New("Task ".. k .. " is status "..v:GetStateString(), 10):ToAll()
          STATECHANGESND = USERSOUND:New( "MissionStateChange.ogg" )
          STATECHANGESND:ToCoalition( coalition.side.BLUE )
          table.remove(TaskTableSEAD, k)
        if v:IsStateSuccess() then
          SEADJTACName1 = SEADJTAC:GetName()
          Group.getByName(SEADJTACName1):destroy()
        end 
        end
        end
      
    end, {}, 120, 20, 0.5)
    
    --↓↓ SCHEDULER ANTISHIP ↓↓------------------------------------------------------------------------------------------------------------------------------------------
    TotalTasksAntiship = 0
    SCHEDULER:New( nil, function()
    local taskcount = CountTableNavBAI(TaskTableNavBAI)
        if taskcount < 1  and TotalTasksAntiship <15000 then
          LastTask = MakeTaskNavBAI()
          TotalTasksAntiship = TotalTasksAntiship + 1
          table.insert (TaskTableNavBAI,LastTask)
          TemplateNavalZones = {navzone1, navzone2, navzone3, navzone4, navzone5, navzone6}
        elseif TotalTasksAntiship == 15000 then
         MESSAGE:New("The maximum Task Count has been reached for this mission. A restart is advised.", 10):ToAll()
        end
     
      for k,v in pairs(TaskTableNavBAI) do
        if v:IsStateCancelled() or v:IsStateFailed() or v:IsStateSuccess() or v:IsStateAborted() then
          MESSAGE:New("Task ".. k .. " is status "..v:GetStateString(), 10):ToAll()
          STATECHANGESND = USERSOUND:New( "MissionStateChange.ogg" )
          STATECHANGESND:ToCoalition( coalition.side.BLUE )
          table.remove(TaskTableNavBAI, k)
          
        end 
      end
      
    end, {}, 150, 20, 0.5)
end
--FIN---------------------------------------------------------------------------------------------------------------------------------------------------------------
if enable_Helo_tasking == true then
  --↓↓ HELO BAI TASK ↓↓----------------------------------------------------------------------------------------------------------------------------------------------------
  function MakeTask_HELO_BAI()
      Mission_HELO_BAI = MISSION:New(CommandCenterHELI, 'STRIKE', 'standard', MissionTextBAI(), coalition.side.BLUE)

      local RngNum = randomnumber()
      local RngCol = randomcolor()
      TargetSetUnitHELO_BAI[RngNum] =
          SET_UNIT:New():FilterCoalitions('red'):FilterPrefixes('✧ Heli BAI' .. RngNum):FilterStart()
      local RNGHELIzone1 = math.random(1, #(TemplateHELOZones))
      local tempRandGroup7 = math.random(1, #(TemplateHELOBAI))
      local tempGrpAlias7 = '✧ Heli BAI' .. RngNum
      trigger.action.outText('MISSION UPDATE: New Helicopter BAI task available', 15)
      NEWBAI = USERSOUND:New('TransmisionEntrante.ogg')
      NEWBAI:ToCoalition(coalition.side.BLUE)

      HELOBAI[RngNum] =
          SPAWN:NewWithAlias(TemplateHELOBAI[tempRandGroup7], tempGrpAlias7):OnSpawnGroup(
          function(SpawnGroup)
              local location1 = SpawnGroup:GetCoordinate() --get the Coordinate of the random spawn
              local newlocation1 = location1:GetRandomVec2InRadius(10, 50) --make a new coord close by. Limitations of map and zone should be considered
              HELOBAIJTAC = SPAWN:NewWithAlias('jtac', 'jtac  Heli BAI-' .. RngNum):SpawnFromVec2(newlocation1)
              HELOBAIJTACName = HELOBAIJTAC:GetName()
              JTACAutoLase(HELOBAIJTACName, 1688, true, 'all', RngCol)
          end
      ):SpawnInZone(TemplateHELOZones[RNGHELIzone1], true)
      table.remove(TemplateHELOZones, RNGHELIzone1)
      TaskHELOBAI[RngNum] = TASK_A2G_BAI:New(Mission_HELO_BAI, TRTHelis, RandOpName(), TargetSetUnitHELO_BAI[RngNum])
      return TaskHELOBAI[RngNum]
  end

  --↓↓ SCHEDULER HELO BAI ↓↓-----------------------------------------------------------------------------------------------------------------------------------------------
  TotalTasksHELObai = 0
  SCHEDULER:New(
      nil,
      function()
          local taskcount = CountTableHELOBAI(TaskTable_HELO_BAI)
          if taskcount < 1 and TotalTasksHELObai < 15000 then
              LastTask = MakeTask_HELO_BAI()
              TotalTasksHELObai = TotalTasksHELObai + 1
              table.insert(TaskTable_HELO_BAI, LastTask)
              TemplateHELOZones = {HeliZone1, HeliZone2, HeliZone3, HeliZone4, HeliZone5, HeliZone6, HeliZone7, HeliZone8, HeliZone9, HeliZone10, HeliZone11, HeliZone12, HeliZone13, HeliZone14, HeliZone15, HeliZone16, HeliZone17, HeliZone18, HeliZone19, HeliZone20, HeliZone21, HeliZone22, HeliZone23, HeliZone24, HeliZone25, HeliZone26, HeliZone27, HeliZone28, HeliZone29, HeliZone30, HeliZone31, HeliZone32, HeliZone33, HeliZone34, HeliZone35, HeliZone36, HeliZone37, HeliZone38, HeliZone39, HeliZone40}
          elseif TotalTasksHELObai == 15000 then
              MESSAGE:New('The maximum Task Count has been reached for this mission. A restart is advised.', 10):ToAll(

              )
          end

          for k, v in pairs(TaskTable_HELO_BAI) do
              if v:IsStateCancelled() or v:IsStateFailed() or v:IsStateSuccess() or v:IsStateAborted() then
                  MESSAGE:New('Task ' .. k .. ' is status ' .. v:GetStateString(), 10):ToAll()
                  STATECHANGESND = USERSOUND:New('MissionStateChange.ogg')
                  STATECHANGESND:ToCoalition(coalition.side.BLUE)
                  table.remove(TaskTable_HELO_BAI, k)
                  if v:IsStateSuccess() then
                      HeloBAIJTACName1 = HELOBAIJTAC:GetName()
                      Group.getByName(HeloBAIJTACName1):destroy()
                  end
              end
          end
      end,
      {},
      75,
      20,
      0.5
  )
end
--FIN-----------------------------------------------------------------------------------------------------------------------------------------------
--↓↓ BAI TASK (MENU) ↓↓----------------------------------------------------------------------------------------------------------------------------------------------------
function MakeTaskBAI_menucmd()
  MissionBAI = MISSION:New(CommandCenterA2G, 'STRIKE', 'standard', MissionTextBAI(), coalition.side.BLUE)

  local RngNum = randomnumber()
  local RngCol = randomcolor()
  TargetSetUnitBAI[RngNum] = SET_UNIT:New():FilterCoalitions('red'):FilterPrefixes('✧ BAI' .. RngNum):FilterStart()
  local RNGzone1 = math.random(1, #(TemplateZones))
  local tempRandGroup1 = math.random(1, #(TemplateBAI))
  local tempGrpAlias1 = '✧ BAI' .. RngNum
  trigger.action.outText('MISSION UPDATE: New BAI task available', 15)
  NEWBAI = USERSOUND:New('TransmisionEntrante.ogg')
  NEWBAI:ToCoalition(coalition.side.BLUE)

  BAI[RngNum] =
      SPAWN:NewWithAlias(TemplateBAI[tempRandGroup1], tempGrpAlias1):SpawnInZone(TemplateZones[RNGzone1], true)
  table.remove(TemplateZones, RNGzone1)
  TaskBAI[RngNum] = TASK_A2G_BAI:New(MissionBAI, TRTPlanes, RandOpName(), TargetSetUnitBAI[RngNum])
  return TaskBAI[RngNum]
end
--↓↓ BAI HARD TASK (MENU) ↓↓-----------------------------------------------------------------------------------------------------------------------------------------------
function MakeTaskBAIHARD_menucmd()
  MissionBAIHARD = MISSION:New(CommandCenterA2G, 'STRIKE', 'hard', MissionTextBAI(), coalition.side.BLUE) --test

  local RngNum = randomnumber()
  local RngCol = randomcolor()
  TargetSetUnitBAIHARD[RngNum] =
      SET_UNIT:New():FilterCoalitions('red'):FilterPrefixes('☠ BAI ' .. RngNum):FilterStart()
  local RNGzone4 = math.random(1, #(TemplateZones))
  local tempRandGroup4 = math.random(1, #(TemplateBAIHARD))
  local tempGrpAlias4 = '☠ BAI ' .. RngNum
  trigger.action.outText('MISSION UPDATE: New BAI -Hard- task available', 15)
  NEWBAIHARD = USERSOUND:New('TransmisionEntrante.ogg')
  NEWBAIHARD:ToCoalition(coalition.side.BLUE)

  BAIHARD[RngNum] =
      SPAWN:NewWithAlias(TemplateBAIHARD[tempRandGroup4], tempGrpAlias4):SpawnInZone(TemplateZones[RNGzone4], true)
  table.remove(TemplateZones, RNGzone4)
  TaskBAIHARD[RngNum] = TASK_A2G_BAI:New(MissionBAIHARD, TRTPlanes, RandOpName(), TargetSetUnitBAIHARD[RngNum])
  return TaskBAIHARD[RngNum]
end
--↓↓ ANTISHIP TASK (MENU) ↓↓-----------------------------------------------------------------------------------------------------------------------------------------------
function MakeTaskNavBAI_menucmd()
  MissionNavBAI = MISSION:New(CommandCenterA2G, 'ANSTISHIP', 'standard', MissionTextNAV(), coalition.side.BLUE)

  local RngNum = randomnumber()
  TargetSetUnitNavBAI[RngNum] =
      SET_UNIT:New():FilterCoalitions('red'):FilterPrefixes('⚓ NAVAL ' .. RngNum):FilterStart()
  local RNGzone2 = math.random(1, #(TemplateNavalZones))
  local tempRandGroup3 = math.random(1, #(TemplateNavBAI))
  local tempGrpAlias3 = '⚓ NAVAL ' .. RngNum
  trigger.action.outText('MISSION UPDATE: New ANTI SHIP task available', 15)
  NEWBAIAS = USERSOUND:New('TransmisionEntrante.ogg')
  NEWBAIAS:ToCoalition(coalition.side.BLUE)

  NavBAI[RngNum] =
      SPAWN:NewWithAlias(TemplateNavBAI[tempRandGroup3], tempGrpAlias3):SpawnInZone(
      TemplateNavalZones[RNGzone2],
      true
  )
  table.remove(TemplateNavalZones, RNGzone2)
  TaskNavBAI[RngNum] = TASK_A2G_BAI:New(MissionNavBAI, TRTPlanes, RandOpName(), TargetSetUnitNavBAI[RngNum])
  return TaskNavBAI[RngNum]
end
--↓↓ SEAD TASK (MENU) ↓↓---------------------------------------------------------------------------------------------------------------------------------------------------
function MakeTaskSEAD_menucmd()
  MissionSEAD = MISSION:New(CommandCenterA2G, 'SEAD', 'standard', MissionTextSEAD(), coalition.side.BLUE)

  local RngNum = randomnumber()
  local RngCol = randomcolor()
  TargetSetUnitSEAD[RngNum] = SET_UNIT:New():FilterCoalitions('red'):FilterPrefixes('✦ SEAD' .. RngNum):FilterStart()
  local RNGzone3 = math.random(1, #(TemplateZones))
  local tempRandGroup2 = math.random(1, #(SEAD_GROUPS))
  local tempGrpAlias2 = '✦ SEAD' .. RngNum
  trigger.action.outText('MISSION UPDATE: New SEAD task available', 15)
  NEWSEAD = USERSOUND:New('TransmisionEntrante.ogg')
  NEWSEAD:ToCoalition(coalition.side.BLUE)

  SEAD[RngNum] =
      SPAWN:NewWithAlias(SEAD_GROUPS[tempRandGroup2], tempGrpAlias2):SpawnInZone(TemplateZones[RNGzone3], true)
  table.remove(TemplateZones, RNGzone3)
  TaskSEAD[RngNum] = TASK_A2G_SEAD:New(MissionSEAD, TRTPlanes, RandOpName(), TargetSetUnitSEAD[RngNum])
  return TaskSEAD[RngNum]
end
--
--↓↓ AIRBOSS ↓↓-----------------------------------------------------------------------------------------------------------------------------------------------------
local tanker =
    RECOVERYTANKER:New(UNIT:FindByName('⚓ CVN-73 George Washington'), '☮ YPF'):SetTakeoffAir():SetAltitude(
    Tanker_BOOM_Altitude
):SetSpeed(Tanker_BOOM_Speed):SetHomeBase(AIRBASE.PersianGulf.Dubai_Intl):SetRadio(255):SetModex(511):SetTACAN(
    24,
    'YPF'
):SetRacetrackDistances(50, 5):Start()

local tanker2 =
    RECOVERYTANKER:New(UNIT:FindByName('⚓ CVN-73 George Washington'), '☮ ARCO'):SetTakeoffAir():SetAltitude(
    Tanker_BASKET_Altitude
):SetSpeed(Tanker_BASKET_Speed):SetHomeBase(AIRBASE.PersianGulf.Dubai_Intl):SetRadio(257):SetModex(512):SetTACAN(
    25,
    'ARC'
):SetRacetrackDistances(50, 5):Start()

local awacs =
    RECOVERYTANKER:New(UNIT:FindByName('⚓ CVN-73 George Washington'), '☮ Wizard'):SetAWACS():SetTakeoffAir():SetRadio(
    251
):SetAltitude(20000):SetHomeBase(AIRBASE.PersianGulf.Dubai_Intl):SetCallsign(CALLSIGN.AWACS.Wizard):SetRacetrackDistances(
    40,
    5
):SetTACAN(26, 'WIZ'):SetModex(611):__Start(1)

if enable_RescueHelos == true then
    local rescuehelo =
        RESCUEHELO:New(UNIT:FindByName('⚓ CVN-74 Stennis'), '☮ Rescate'):SetHomeBase(AIRBASE:FindByName('Tico_A')):SetTakeoffAir(

    ):SetRespawnInAir():SetRescueDuration(1):SetModex(42):Start()

    local rescueheloB =
        RESCUEHELO:New(UNIT:FindByName('⚓ LHA-1 Tarawa'), '☮ Rescate'):SetHomeBase(AIRBASE:FindByName('Tico_B')):SetTakeoffAir(

    ):SetRespawnInAir():SetRescueDuration(1):SetModex(43):Start()

    local rescueheloC =
        RESCUEHELO:New(UNIT:FindByName('⚓ CVN-73 George Washington'), '☮ Rescate'):SetHomeBase(
        AIRBASE:FindByName('Tico_C')
    ):SetTakeoffAir():SetRespawnInAir():SetRescueDuration(1):SetModex(44):Start()
end

BARCO01 = GROUP:FindByName('⚓ Admiral Kuznetsov'):PatrolRoute()
BARCO02 = GROUP:FindByName('⚓ LHA-1 Tarawa'):PatrolRoute()
local TarawaTCNU = UNIT:FindByName('⚓ LHA-1 Tarawa')
local TarawaBeacon = TarawaTCNU:GetBeacon():ActivateTACAN(75, 'X', 'LHA', true):ActivateICLS(2, 'LHA')
BARCO03 = GROUP:FindByName('⚓ CVN-74 Stennis'):PatrolRoute()
local StennisTCNU = UNIT:FindByName('⚓ CVN-74 Stennis')
local StennisBeacon = StennisTCNU:GetBeacon():ActivateTACAN(74, 'X', 'STN', true):ActivateICLS(1, 'STN')
BARCO04 = GROUP:FindByName('⚓ CVN-73 George Washington'):PatrolRoute()
local WashingtonTCNU = UNIT:FindByName('⚓ CVN-73 George Washington')
local WashingtonBeacon = WashingtonTCNU:GetBeacon():ActivateTACAN(73, 'X', 'WSN', true):ActivateICLS(3, 'WSN')

--[[
-- Create AIRBOSS object.
local AirbossStennis=AIRBOSS:New("⚓ CVN-74 Stennis")

-- Add recovery windows:
-- AIRBOSS:AddRecoveryWindow(starttime, stoptime, case, holdingoffset, turnintowind, speed, uturn)
local window1=AirbossStennis:AddRecoveryWindow( "09:30", "22:00", 1, nil, false, 11, false)

-- Set folder of airboss sound files within miz file.
AirbossStennis:SetSoundfilesFolder("Airboss Soundfiles/")

-- Single carrier menu optimization.
-- AirbossStennis:SetMenuSingleCarrier()

-- Skipper menu.
-- AIRBOSS:SetMenuRecovery(duration, windondeck, uturn, offset)
AirbossStennis:SetMenuRecovery(30, 15, false, 30)

-- Remove landed AI planes from flight deck.
AirbossStennis:SetDespawnOnEngineShutdown()

-- Load all saved player grades from your "Saved Games\DCS" folder (if lfs was desanitized).
-- AirbossStennis:Load()

-- Automatically save player results to your "Saved Games\DCS" folder each time a player get a final grade from the LSO.
-- AirbossStennis:SetAutoSave()

-- Enable trap sheet.
AirbossStennis:SetTrapSheet()

-- Start airboss class.
AirbossStennis:Start()
]]--

--- Function called when a player gets graded by the LSO.
function AirbossStennis:OnAfterLSOGrade(From, Event, To, playerData, grade)
  local PlayerData=playerData --Ops.Airboss#AIRBOSS.PlayerData
  local Grade=grade --Ops.Airboss#AIRBOSS.LSOgrade
  -- Discord bot here
  local score=tonumber(Grade.points)
  local name=tostring(PlayerData.name)
  
  --- Report LSO grade to dcs.log file.
  env.info(string.format("Player %s scored %.1f", name, score))
end

--FIN---------------------------------------------------------------------------------------------------------------------------------------------------------------
--↓↓ A2A ↓↓---------------------------------------------------------------------------------------------------------------------------------------------------------
EnemySpawnSector1 = ZONE:New('ZONA_REDA2A_SPAWN01')
EnemySpawnSector2 = ZONE:New('ZONA_REDA2A_SPAWN02')
EnemySpawnSector3 = ZONE:New('ZONA_REDA2A_SPAWN03')
EnemySpawnSector4 = ZONE:New('ZONA_REDA2A_SPAWN04')
EnemySpawnSector5 = ZONE:New('ZONA_REDA2A_SPAWN05')
EnemySpawnSector6 = ZONE:New('ZONA_REDA2A_SPAWN06')
AlliedSpawnSector1 = ZONE:New('ZONA_BLUEA2A_SPAWN01')
AlliedSpawnSector2 = ZONE:New('ZONA_BLUEA2A_SPAWN02')
AlliedSpawnSector3 = ZONE:New('ZONA_BLUEA2A_SPAWN03')
AlliedSpawnSector4 = ZONE:New('ZONA_BLUEA2A_SPAWN04')
EnemyCAPZoneList = {EnemySpawnSector1, EnemySpawnSector2, EnemySpawnSector3, EnemySpawnSector4, EnemySpawnSector5, EnemySpawnSector6}
AlliedCAPZoneList = {AlliedSpawnSector1, AlliedSpawnSector2, AlliedSpawnSector3, AlliedSpawnSector4}

local RngIDred = randomnumber()
local RngIDblue = randomnumber()
local RngIDBOMBRED = randomnumber()
local RedCatSQDN = '☢ CAT SQDN' .. RngIDred
local RedBearSQDN = '☢ BEAR SQDN' .. RngIDred
local RedTigerSQDN = '☢ TIGER SQDN' .. RngIDred
local BlueFalconSQDN = '☮ FALCON SQDN' .. RngIDblue
local BlueHawkSQDN = '☮ HAWK SQDN' .. RngIDblue
local BlueEagleSQDN = '☮ EAGLE SQDN' .. RngIDblue
local RedBOMBSQDN = '☢ BOMBER ' .. RngIDBOMBRED

-----------------------------------------CAT SQDN-----------------------------------------
if Enable_CAT_Squadron == true then
    CATSQDN_CAP =
        SPAWN:NewWithAlias('A2A_REDCAP_TEMPLATE', RedCatSQDN):InitRandomizeTemplate(RedCapPlanesLIST):InitRandomizeRoute(
        1,
        2,
        20000
    ):InitCleanUp(60):InitHeading(120, 180):InitSkill(CAT_SQDN_Skill):InitLimit(TotalAliveRedPlanes, 0)

    function CATSQDN_CAP_start()
        local REDRNG_CAP_ZONE = math.random(1, #(EnemyCAPZoneList))
        CATSQDN_CAP:SpawnInZone(EnemyCAPZoneList[REDRNG_CAP_ZONE], true, 5000, 10000)
    end

    function CATSQDN_CAP_Timer()
        timer.scheduleFunction(CATSQDN_CAP_Timer, {}, timer.getTime() + math.random(Cap_interval_min, Cap_interval_max))
        CATSQDN_CAP_start()
    end

    timer.scheduleFunction(
        function()
            CATSQDN_CAP_Timer()
        end,
        nil,
        timer.getTime() + math.random(300, 600)
    )
end
if Enable_CAT_Squadron == false then
--nothing
end
-----------------------------------------BEAR SQDN-----------------------------------------
if Enable_BEAR_Squadron == true then
    BEARSQDN_CAP_Timer =
        SPAWN:NewWithAlias('A2A_REDCAP_TEMPLATE', RedBearSQDN):InitRandomizeTemplate(RedCapPlanesLIST):InitRandomizeRoute(
        1,
        2,
        20000
    ):InitCleanUp(60):InitHeading(120, 180):InitSkill(BEAR_SQDN_Skill):InitLimit(TotalAliveRedPlanes, 0)

    function BEARSQDN_CAP_Timer_start()
        local REDRNG_CAP_ZONE = math.random(1, #(EnemyCAPZoneList))
        BEARSQDN_CAP_Timer:SpawnInZone(EnemyCAPZoneList[REDRNG_CAP_ZONE], true, 5000, 10000)
    end

    function BEARSQDN_CAP_Timer_Timer()
        timer.scheduleFunction(
            BEARSQDN_CAP_Timer_Timer,
            {},
            timer.getTime() + math.random(Cap_interval_min, Cap_interval_max)
        )
        BEARSQDN_CAP_Timer_start()
    end

    timer.scheduleFunction(
        function()
            BEARSQDN_CAP_Timer_Timer()
        end,
        nil,
        timer.getTime() + math.random(300, 600)
    )
end
if Enable_BEAR_Squadron == false then
--nothing
end
-----------------------------------------TIGER SQDN-----------------------------------------
if Enable_TIGER_Squadron == true then
    TIGERSQDN_CAP_Timer =
        SPAWN:NewWithAlias('A2A_REDCAP_TEMPLATE', RedTigerSQDN):InitRandomizeTemplate(RedCapPlanesLIST):InitRandomizeRoute(
        1,
        2,
        20000
    ):InitCleanUp(60):InitHeading(120, 180):InitSkill(TIGER_SQDN_Skill):InitLimit(TotalAliveRedPlanes, 0)

    function TIGERSQDN_CAP_Timer_start()
        local REDRNG_CAP_ZONE = math.random(1, #(EnemyCAPZoneList))
        TIGERSQDN_CAP_Timer:SpawnInZone(EnemyCAPZoneList[REDRNG_CAP_ZONE], true, 5000, 10000)
    end

    function TIGERSQDN_CAP_Timer_Timer()
        timer.scheduleFunction(
            TIGERSQDN_CAP_Timer_Timer,
            {},
            timer.getTime() + math.random(Cap_interval_min, Cap_interval_max)
        )
        TIGERSQDN_CAP_Timer_start()
    end

    timer.scheduleFunction(
        function()
            TIGERSQDN_CAP_Timer_Timer()
        end,
        nil,
        timer.getTime() + math.random(300, 600)
    )
end
if Enable_TIGER_Squadron == false then
--nothing
end
-----------------------------------------BOMB SQUADS----------------------------------------------------------------------------------------------------------------
if Enable_BOMBER_Squadrons == true then
    BomberSquadron =
        SPAWN:NewWithAlias('A2A_BOMBSQUADTEMPLATE', RedBOMBSQDN):InitRandomizeTemplate(RedBombPlanesLIST):InitRandomizeRoute(
        1,
        2,
        20000
    ):InitCleanUp(240):InitHeading(120, 180):InitLimit(4, 0)

    function BomberSquadron_start()
        local REDRNG_CAP_ZONE = math.random(1, #(EnemyCAPZoneList))
        BomberSquadron:SpawnInZone(EnemyCAPZoneList[REDRNG_CAP_ZONE], true, 5000, 10000)
        trigger.action.outText('Bomber Squadron detected!', 15)
        trigger.action.outSound('TransmisionEntrante.ogg')
    end

    function BomberSquadron_Timer()
        timer.scheduleFunction(
            BomberSquadron_Timer,
            {},
            timer.getTime() + math.random(Bomber_interval_min, Bomber_interval_max)
        )
        BomberSquadron_start()
    end

    timer.scheduleFunction(
        function()
            BomberSquadron_Timer()
        end,
        nil,
        timer.getTime() + math.random(600, 900)
    )
end
if Enable_BOMBER_Squadrons == false then
--nothing
end
--FIN---------------------------------------------------------------------------------------------------------------------------------------------------------------
-----------------------------------------FALCON SQDN-----------------------------------------
if Enable_FALCON_Squadron == true then
    FALCONSQDN_CAP_Timer =
        SPAWN:NewWithAlias('A2A_BLUECAP_TEMPLATE', BlueFalconSQDN):InitRandomizeTemplate(BlueCapPlanesLIST):InitRandomizeRoute(
        1,
        2,
        20000
    ):InitCleanUp(60):InitHeading(120, 180):InitSkill(FALCON_SQDN_Skill):InitLimit(TotalAliveBluePlanes, 0)

    function FALCONSQDN_CAP_Timer_start()
        local BLUERNG_CAP_ZONE = math.random(1, #(AlliedCAPZoneList))
        FALCONSQDN_CAP_Timer:SpawnInZone(AlliedCAPZoneList[BLUERNG_CAP_ZONE], true, 5000, 10000)
    end

    function FALCONSQDN_CAP_Timer_Timer()
        timer.scheduleFunction(
            FALCONSQDN_CAP_Timer_Timer,
            {},
            timer.getTime() + math.random(Cap_interval_min, Cap_interval_max)
        )
        FALCONSQDN_CAP_Timer_start()
    end

    timer.scheduleFunction(
        function()
            FALCONSQDN_CAP_Timer_Timer()
        end,
        nil,
        timer.getTime() + math.random(300, 600)
    )
end
if Enable_FALCON_Squadron == false then
--nothing
end
-----------------------------------------HAWK SQDN-----------------------------------------
if Enable_HAWK_Squadron == true then
    HAWKSQDN_CAP_Timer =
        SPAWN:NewWithAlias('A2A_BLUECAP_TEMPLATE', BlueHawkSQDN):InitRandomizeTemplate(BlueCapPlanesLIST):InitRandomizeRoute(
        1,
        2,
        20000
    ):InitCleanUp(60):InitHeading(120, 180):InitSkill(HAWK_SQDN_Skill):InitLimit(TotalAliveBluePlanes, 0)

    function HAWKSQDN_CAP_Timer_start()
        local BLUERNG_CAP_ZONE = math.random(1, #(AlliedCAPZoneList))
        HAWKSQDN_CAP_Timer:SpawnInZone(AlliedCAPZoneList[BLUERNG_CAP_ZONE], true, 5000, 10000)
    end

    function HAWKSQDN_CAP_Timer_Timer()
        timer.scheduleFunction(
            HAWKSQDN_CAP_Timer_Timer,
            {},
            timer.getTime() + math.random(Cap_interval_min, Cap_interval_max)
        )
        HAWKSQDN_CAP_Timer_start()
    end

    timer.scheduleFunction(
        function()
            HAWKSQDN_CAP_Timer_Timer()
        end,
        nil,
        timer.getTime() + math.random(300, 600)
    )
end
if Enable_HAWK_Squadron == false then
--nothing
end
-----------------------------------------EAGLE SQDN-----------------------------------------
if Enable_EAGLE_Squadron == true then
    EAGLESQDN_CAP_Timer =
        SPAWN:NewWithAlias('A2A_BLUECAP_TEMPLATE', BlueEagleSQDN):InitRandomizeTemplate(BlueCapPlanesLIST):InitRandomizeRoute(
        1,
        2,
        20000
    ):InitCleanUp(60):InitHeading(120, 180):InitSkill(EAGLE_SQDN_Skill):InitLimit(TotalAliveBluePlanes, 0)

    function EAGLESQDN_CAP_Timer_start()
        local BLUERNG_CAP_ZONE = math.random(1, #(AlliedCAPZoneList))
        EAGLESQDN_CAP_Timer:SpawnInZone(AlliedCAPZoneList[BLUERNG_CAP_ZONE], true, 5000, 10000)
    end

    function EAGLESQDN_CAP_Timer_Timer()
        timer.scheduleFunction(
            EAGLESQDN_CAP_Timer_Timer,
            {},
            timer.getTime() + math.random(Cap_interval_min, Cap_interval_max)
        )
        EAGLESQDN_CAP_Timer_start()
    end

    timer.scheduleFunction(
        function()
            EAGLESQDN_CAP_Timer_Timer()
        end,
        nil,
        timer.getTime() + math.random(300, 600)
    )
end
if Enable_EAGLE_Squadron == false then
--nothing
end
--FIN---------------------------------------------------------------------------------------------------------------------------------------------------------------
-----------------------------------------FAKE CSAR-----------------------------------------
FAKE_CSAR_Planes_LIST = {
    '☮ F14B',
    --'☮ F16C'
  }
  
  if enable_CSAR == true then
    FAKE_CSAR_Timer =
        SPAWN:NewWithAlias('A2A_BLUECAP_CSAR', "Allied Plane"):InitRandomizeTemplate(FAKE_CSAR_Planes_LIST):InitRandomizeRoute(
        1,
        2,
        20000
    ):InitHeading(0, 360):InitLimit(1, 0)
  
    function FAKE_CSAR_Timer_start()
        local FAKE_CSAR_Zone = math.random(1, #(TemplateHELOZones))
        FAKE_CSAR_Timer:SpawnInZone(TemplateHELOZones[FAKE_CSAR_Zone], true, 5000, 10000)
    end
  
    function FAKE_CSAR_Timer_Timer()
        timer.scheduleFunction(FAKE_CSAR_Timer_Timer, {}, timer.getTime() + math.random(CSAR_Time_Min, CSAR_Time_Max))
        FAKE_CSAR_Timer_start()
    end
  
    timer.scheduleFunction(
        function()
            FAKE_CSAR_Timer_Timer()
        end,
        nil,
        timer.getTime() + math.random(30, 60)
    )
  end
--FIN---------------------------------------------------------------------------------------------------------------------------------------------------------------
--↓↓ FOX MISSILE TRAINER ↓↓-----------------------------------------------------------------------------------------------------------------------------------------
if enable_MissileTrainer == true then
  fox = FOX:New()
  fox:AddSafeZone(ZONE:New('SAFE01'))
  fox:AddSafeZone(ZONE:New('SAFE02'))
  fox:AddSafeZone(ZONE:New('SAFE03'))
  fox:AddSafeZone(ZONE:New('SAFE04'))
  fox:AddProtectedGroup(GROUP:FindByName('⚓ CVN-74 Stennis'))
  fox:AddProtectedGroup(GROUP:FindByName('⚓ CVN-73 George Washington'))
  fox:AddProtectedGroup(GROUP:FindByName('⚓ LHA-1 Tarawa'))
  fox:AddProtectedGroup(GROUP:FindByName('⚓ Admiral Kuznetsov'))
  fox:AddSafeZone(ZONE_UNIT:New('⚓ CVN-74 Stennis', UNIT:FindByName('⚓ CVN-74 Stennis'), 9260))
  fox:AddSafeZone(ZONE_UNIT:New('⚓ CVN-73 George Washington', UNIT:FindByName('⚓ CVN-73 George Washington'), 9260))
  fox:AddSafeZone(ZONE_UNIT:New('⚓ LHA-1 Tarawa', UNIT:FindByName('⚓ LHA-1 Tarawa'), 9260))
  fox:AddSafeZone(ZONE_UNIT:New('⚓ Admiral Kuznetsov', UNIT:FindByName('⚓ Admiral Kuznetsov'), 9260))
  fox:AddLaunchZone(ZONE:New('Lanzamientos'))
  fox:SetDefaultLaunchMarks(false)
  fox:SetDisableF10Menu(true)

  function fox:OnAfterEnterSafeZone(From, Event, To, _player)
      local player = _player --Functional.Fox2#FOX.PlayerData
      --    MESSAGE:New("✠ You are in a safe area ✠"):ToClient(player.client)
      trigger.action.outSound('ISA.ogg')
  end

  function fox:OnAfterExitSafeZone(From, Event, To, _player)
      local player = _player --Functional.Fox2#FOX.PlayerData
      --    MESSAGE:New("✠ You are leaving a safe area ✠"):ToClient(player.client)
      trigger.action.outSound('LSA.ogg')
  end

  fox:Start()
end

--FIN---------------------------------------------------------------------------------------------------------------------------------------------------------------
--↓↓ MOOSE SOUND LIB ↓↓---------------------------------------------------------------------------------------------------------------------------------------------
BajasAA1 = USERSOUND:New( "Baja AA 1.ogg" )
BajasAA2 = USERSOUND:New( "Baja AA 2.ogg" )
BajasAA3 = USERSOUND:New( "Baja AA 3.ogg" )
BajasAA4 = USERSOUND:New( "Baja AA 4.ogg" )
BajasAA5 = USERSOUND:New( "Baja AA 5.ogg" )
BajasAA6 = USERSOUND:New( "Baja AA 6.ogg" )
BajasAA7 = USERSOUND:New( "Baja AA 7.ogg" )
BajasAA8 = USERSOUND:New( "Baja AA 8.ogg" )
BajasAA9 = USERSOUND:New( "Baja AA 9.ogg" )
BajasAA10 = USERSOUND:New( "Baja AA 10.ogg" )
BajasAA11 = USERSOUND:New( "Baja AA 11.ogg" )
BajasAA12 = USERSOUND:New( "Baja AA 12.ogg" )
BajasAA13 = USERSOUND:New( "Baja AA 13.ogg" )
BajasAA14 = USERSOUND:New( "Baja AA 14.ogg" )
BajasAA15 = USERSOUND:New( "Baja AA 15.ogg" )
BajasAA16 = USERSOUND:New( "Baja AA 16.ogg" )

BajasAL1 = USERSOUND:New( "PISO 1.ogg" )
BajasAL2 = USERSOUND:New( "PISO 2.ogg" )
BajasAL3 = USERSOUND:New( "PISO 3.ogg" )
BajasAL4 = USERSOUND:New( "PISO 4.ogg" )
BajasAL5 = USERSOUND:New( "PISO 5.ogg" )
BajasAL6 = USERSOUND:New( "PISO 6.ogg" )
BajasAL7 = USERSOUND:New( "PISO 7.ogg" )
BajasAL8 = USERSOUND:New( "PISO 8.ogg" )
BajasAL9 = USERSOUND:New( "PISO 9.ogg" )
BajasAL10 = USERSOUND:New( "PISO 10.ogg" )
BajasAL11 = USERSOUND:New( "PISO 11.ogg" )
BajasAL12 = USERSOUND:New( "PISO 12.ogg" )
BajasAL13 = USERSOUND:New( "PISO 13.ogg" )
BajasAL14 = USERSOUND:New( "PISO 14.ogg" )
BajasAL15 = USERSOUND:New( "PISO 15.ogg" )
BajasAL16 = USERSOUND:New( "PISO 16.ogg" )

BajasAG1 = USERSOUND:New( "Baja AG 1.ogg" )
BajasAG2 = USERSOUND:New( "Baja AG 2.ogg" )
BajasAG3 = USERSOUND:New( "Baja AG 3.ogg" )
BajasAG4 = USERSOUND:New( "Baja AG 4.ogg" )
BajasAG5 = USERSOUND:New( "Baja AG 5.ogg" )
BajasAG6 = USERSOUND:New( "Baja AG 6.ogg" )
BajasAG7 = USERSOUND:New( "Baja AG 7.ogg" )
BajasAG8 = USERSOUND:New( "Baja AG 8.ogg" )
BajasAG9 = USERSOUND:New( "Baja AG 9.ogg" )

TempBAJASAA = {BajasAA1, BajasAA2, BajasAA3, BajasAA4, BajasAA5, BajasAA6,BajasAA7,BajasAA8,BajasAA9,BajasAA10,BajasAA11,BajasAA12,BajasAA13,BajasAA14,BajasAA15,BajasAA16}
TempBAJASAL = {BajasAL1, BajasAL2, BajasAL3, BajasAL4, BajasAL5, BajasAL6,BajasAL7,BajasAL8,BajasAL9,BajasAL10,BajasAL11,BajasAL12,BajasAL13,BajasAL14,BajasAL15,BajasAL16}
TempBAJASAG = {BajasAG1, BajasAG2, BajasAG3, BajasAG4, BajasAG5, BajasAG6,BajasAG7,BajasAG8,BajasAG9}

Contadorde_BajasAA = SET_UNIT:New():FilterPrefixes( { "☢" } ):FilterCoalitions( "Red" ):FilterStart()
Contadorde_BajasAA:HandleEvent(EVENTS.Crash)

function SonidoBajaAA()
local Sound = TempBAJASAA[math.random(1,table.getn(TempBAJASAA))]
return Sound
end

function SonidoBajaAL()
local Sound = TempBAJASAL[math.random(1,table.getn(TempBAJASAL))]
return Sound
end

function SonidoBajaAG()
local Sound = TempBAJASAG[math.random(1,table.getn(TempBAJASAG))]
return Sound
end

function Contadorde_BajasAA:OnEventCrash(EventData)
  local CrashedUnitCoalition = EventData.IniCoalition
  local CrashedUnitType = EventData.IniTypeName

  if (RadioAmbienteActivada_AA == 1) then
      if (CrashedUnitCoalition == 1) then
          trigger.action.outText('✗ Enemy ' .. CrashedUnitType .. '  shot down!', 5)
          SNDBAJAEN = SonidoBajaAA()
          SNDBAJAEN:ToCoalition(coalition.side.BLUE)
      elseif (CrashedUnitCoalition == 2) then
          trigger.action.outText('✝ Allied ' .. CrashedUnitType .. '  shot down!', 5)
          SNDBAJAAL = SonidoBajaAL()
          SNDBAJAAL:ToCoalition(coalition.side.BLUE)
      else
          --NADA
      end
  else
      --NADA
  end
end

Contadorde_BajasAG = SET_UNIT:New():FilterCoalitions('Red'):FilterStart()
Contadorde_BajasAG:HandleEvent(EVENTS.Dead)

function Contadorde_BajasAG:OnEventDead(EventData)
  local A2Gdestroyedcoalition = EventData.IniCoalition
  local A2GdestroyedType = EventData.IniTypeName

  if (RadioAmbienteActivada_AG == 1) then
      if (A2Gdestroyedcoalition == 1) then
          --trigger.action.outText("✗ A " .. A2GdestroyedType .. " has been destroyed! ",15)
          SNDBAJAAG = SonidoBajaAG()
          SNDBAJAAG:ToCoalition(coalition.side.BLUE)
      end
  else
      --NADA
  end
end

SET_Despegues = SET_UNIT:New():FilterPrefixes('✈'):FilterCoalitions('Blue'):FilterStart()
SET_Despegues:HandleEvent(EVENTS.Takeoff)

function SET_Despegues:OnEventTakeoff(EventData)
  local GRUPODEJUGADOR = EventData.IniDCSGroupName
  local LUGARDEDESPEGUE = EventData.PlaceName
  local NOMBREDEJUGADOR1 = EventData.IniPlayerName

  if string.find(GRUPODEJUGADOR, '✈') then
      trigger.action.outText(NOMBREDEJUGADOR1 .. ' took off from ' .. LUGARDEDESPEGUE, 15)
      SNDTAKEOFF = USERSOUND:New('TransmisionEntrante.ogg')
      SNDTAKEOFF:ToCoalition(coalition.side.BLUE)
  else
      --NADA
  end
end

DeleteLanding = EVENTHANDLER:New()
DeleteLanding:HandleEvent(EVENTS.Land)
function DeleteLanding:OnEventLand(EventData)
    ThisGroup = GROUP:FindByName(EventData.IniGroupName)
    GroupUnit = ThisGroup:GetDCSUnit(1)
    FirstUnit = UNIT:Find(GroupUnit)
    if FirstUnit:GetPlayerName() then
        PlayerName = FirstUnit:GetPlayerName()
        trigger.action.outText(PlayerName .. ' has landed', 15)
        SNDLANDING = USERSOUND:New('TransmisionEntrante.ogg')
        SNDLANDING:ToCoalition(coalition.side.BLUE)
        env.info(PlayerName .. ' has landed')
    else
        --env.info('Not a player landed, deleting')
        ScheduleDelete(ThisGroup)
     -- custom schedule to delete a group
    end
end

function ScheduleDelete(group)
    SCHEDULER:New(
        nil,
        function()
            env.info('Cleaning up: Destroying landed group')
            --trigger.action.outText('Cleaning up: Destroying landed AI groups', 15)
            group:Destroy()
        end,
        {},
        240
    )
end

SET_CLIENTJOIN = SET_UNIT:New():FilterPrefixes('✈'):FilterStart()
SET_CLIENTJOIN:HandleEvent(EVENTS.PlayerEnterUnit)

function SET_CLIENTJOIN:OnEventPlayerEnterUnit(EventData)
  local Playerenter = EventData.IniPlayerName
  local PlayerPlaneType = EventData.IniTypeName

  trigger.action.outText('Pilot ' .. Playerenter .. ' is in a ' .. PlayerPlaneType .. ' cockpit.', 15)
  trigger.action.outSound('CFTO.ogg')
end
--FIN---------------------------------------------------------------------------------------------------------------------------------------------------------------
RadioAmbienteActivada_AA = 1
RadioAmbienteActivada_AG = 1
_SETTINGS:SetA2A_BRAA()
_SETTINGS:SetA2G_LL_DDM()
_SETTINGS:SetMessageTime(MESSAGE.Type.Information, 0)

-------------------------
--   Menu / Funciones  --
-------------------------
TRTOpciones = missionCommands.addSubMenuForCoalition(coalition.side.BLUE, "➣[MISSION OPTIONS]", nil)
TRTOpcionesSonido = missionCommands.addSubMenuForCoalition(coalition.side.BLUE, "➣[SOUND OPTIONS]", TRTOpciones, nil)
TRTCurrentMissionSettings = missionCommands.addCommandForCoalition(coalition.side.BLUE, "➣[CURRENT SETTINGS]", TRTOpciones, function() CurrentMissionSettings() end, nil)
TRTCurrentSQDN = missionCommands.addCommandForCoalition(coalition.side.BLUE, "➣[ACTIVE SQDNS LIST", TRTOpciones, function() CurrentCAPSettings() end, nil)

if allow_EndMissionViaRadio == true then
TRTOpcionesENDMISSION = missionCommands.addSubMenuForCoalition(coalition.side.BLUE, "➣[END MISSION]", TRTOpciones, nil)
TRTOpcionesENDMISSIONconfirm1 = missionCommands.addSubMenuForCoalition(coalition.side.BLUE, "✱ [ARE YOU SURE???]", TRTOpcionesENDMISSION, nil)
TRTOpcionesENDMISSION2 = missionCommands.addCommandForCoalition(coalition.side.BLUE, "✱ [YES! get me outta here]", TRTOpcionesENDMISSIONconfirm1, function() ENDMISSIONTRIGGER() end, nil)
TRTOpcionesENDMISSION3 = missionCommands.addCommandForCoalition(coalition.side.BLUE, "✱ [NO!, changed my mind]", TRTOpcionesENDMISSIONconfirm1, function() ENDMISSIONTRIGGERNO() end, nil)
end

TRTOpcionesRadioChatA2A = missionCommands.addCommandForCoalition(coalition.side.BLUE, "➣[TOGGLE A2A COMMS]", TRTOpcionesSonido, function() DesactivarRadioAmbienteAA() end, nil)
TRTOpcionesRadioChatA2G = missionCommands.addCommandForCoalition(coalition.side.BLUE, "➣[TOGGLE A2G COMMS]", TRTOpcionesSonido, function() DesactivarRadioAmbienteAG() end, nil)

if allow_CallSupportViaRadio == true then
TRTOpcionesSoporte = missionCommands.addSubMenuForCoalition(coalition.side.BLUE, "➣[CALL SUPPORT]", TRTOpciones, nil)
TRTOpcionesSoporteBAI = missionCommands.addCommandForCoalition(coalition.side.BLUE, "✱ [BAI]", TRTOpcionesSoporte, function() BLUE_BAI() end, nil)
TRTOpcionesSoporteSEAD = missionCommands.addCommandForCoalition(coalition.side.BLUE, "✱ [SEAD]", TRTOpcionesSoporte, function() BLUE_SEAD() end, nil)
TRTOpcionesSoporteANTISHIP = missionCommands.addCommandForCoalition(coalition.side.BLUE, "✱ [ANTI-SHIP]", TRTOpcionesSoporte, function() BLUE_AS() end, nil)
end

if allow_SpawnRedCAPs == true then
TRTOpcionesREDCAPS = missionCommands.addSubMenuForCoalition(coalition.side.BLUE, "➣[ENEMY CAP SPAWN]", TRTOpciones, nil)
TRTOpcionesEASYCAP = missionCommands.addCommandForCoalition(coalition.side.BLUE, "✱ [EASY - ✈x2]", TRTOpcionesREDCAPS, function() EASYCAP() end, nil)
TRTOpcionesMEDCAP = missionCommands.addCommandForCoalition(coalition.side.BLUE, "✱ [MEDIUM - ✈x3]", TRTOpcionesREDCAPS, function() MEDCAP() end, nil)
TRTOpcionesHARDCAP = missionCommands.addCommandForCoalition(coalition.side.BLUE, "✱ [HARD - ✈x4]", TRTOpcionesREDCAPS, function() HARDCAP() end, nil)
end

if allow_ManualTaskCreation == true then
TRTOpcionesTASKSMAIN = missionCommands.addSubMenuForCoalition(coalition.side.BLUE, "➣[MANUAL TASK CREATION]", TRTOpciones, nil)
TRTOpcionesMakeBAI = missionCommands.addCommandForCoalition(coalition.side.BLUE, "✱ [BAI TASK]", TRTOpcionesTASKSMAIN, function() MakeTaskBAI_menucmd() end, nil)
TRTOpcionesMakeBAIHard = missionCommands.addCommandForCoalition(coalition.side.BLUE, "✱ [BAI (HARD) TASK]", TRTOpcionesTASKSMAIN, function() MakeTaskBAIHARD_menucmd() end, nil)
TRTOpcionesMakeSEAD = missionCommands.addCommandForCoalition(coalition.side.BLUE, "✱ [SEAD TASK]", TRTOpcionesTASKSMAIN, function() MakeTaskSEAD_menucmd() end, nil)
TRTOpcionesMakeAship = missionCommands.addCommandForCoalition(coalition.side.BLUE, "✱ [ANTI SHIP TASK]", TRTOpcionesTASKSMAIN, function() MakeTaskNavBAI_menucmd() end, nil)
end
--FIN---------------------------------------------------------------------------------------------------------------------------------------------------------------
--↓↓ ENEMY CAP SPAWN ↓↓---------------------------------------------------------------------------------------------------------------------------------------------
EASY_CapPlanesLIST = {
    '☢ MiG-31',
    '☢ MiG-29S',
    '☢ MiG-21Bis',
    '☢ Su-27',
    '☢ Su-33',
    '☢ MiG-19P',
    '☢ MiG-23MLD',
    '☢ MiG-25PD',
    '☢ Su-34',
    '☢ F5E3',
    '☢ F-15C',
    '☢ F-18C',
    '☢ F-14B',
    '☢ JF-17',
    '☢ J-11',
    '☢ Mirage 2000'
}

MEDIUM_CapPlanesLIST = {
    '☢ MiG-31_Med',
    '☢ MiG-29S_Med',
    '☢ MiG-21Bis_Med',
    '☢ Su-27_Med',
    '☢ Su-33_Med',
    '☢ MiG-19P_Med',
    '☢ MiG-23MLD_Med',
    '☢ MiG-25PD_Med',
    '☢ Su-34_Med',
    '☢ F5E3_Med',
    '☢ F-15C_Med',
    '☢ F-18C_Med',
    '☢ F-14B_Med',
    '☢ JF-17_Med',
    '☢ J-11_Med',
    '☢ Mirage 2000_Med'
}

HARD_CapPlanesLIST = {
    '☢ MiG-31_Hard',
    '☢ MiG-29S_Hard',
    '☢ MiG-21Bis_Hard',
    '☢ Su-27_Hard',
    '☢ Su-33_Hard',
    '☢ MiG-19P_Hard',
    '☢ MiG-23MLD_Hard',
    '☢ MiG-25PD_Hard',
    '☢ Su-34_Hard',
    '☢ F5E3_Hard',
    '☢ F-15C_Hard',
    '☢ F-18C_Hard',
    '☢ F-14B_Hard',
    '☢ JF-17_Hard',
    '☢ J-11_Hard',
    '☢ Mirage 2000_Hard'
}

function EASYCAP()
    EASY_CapSpawn =
        SPAWN:NewWithAlias('A2A_REDCAP_TEMPLATE', 'EASY CAP'):InitRandomizeTemplate(EASY_CapPlanesLIST):InitSkill(
        'Average'
    ):InitRandomizeRoute(1, 2, 20000):InitCleanUp(60):InitHeading(120, 180):InitLimit(4, 0)
    local REDRNG_CAP_ZONE = math.random(1, #(EnemyCAPZoneList))
    EASY_CapSpawn:SpawnInZone(EnemyCAPZoneList[REDRNG_CAP_ZONE], true, 5000, 10000)
end

function MEDCAP()
    MEDIUM_CapSpawn =
        SPAWN:NewWithAlias('A2A_REDCAP_TEMPLATE', 'MEDIUM CAP'):InitRandomizeTemplate(MEDIUM_CapPlanesLIST):InitSkill(
        'Good'
    ):InitRandomizeRoute(1, 2, 20000):InitCleanUp(60):InitHeading(120, 180):InitLimit(6, 0)
    local REDRNG_CAP_ZONE = math.random(1, #(EnemyCAPZoneList))
    MEDIUM_CapSpawn:SpawnInZone(EnemyCAPZoneList[REDRNG_CAP_ZONE], true, 5000, 10000)
end

function HARDCAP()
    HARDCapSpawn =
        SPAWN:NewWithAlias('A2A_REDCAP_TEMPLATE', 'HARD CAP'):InitRandomizeTemplate(HARD_CapPlanesLIST):InitSkill(
        'Excellent'
    ):InitRandomizeRoute(1, 2, 20000):InitCleanUp(60):InitHeading(120, 180):InitLimit(8, 0)
    local REDRNG_CAP_ZONE = math.random(1, #(EnemyCAPZoneList))
    HARDCapSpawn:SpawnInZone(EnemyCAPZoneList[REDRNG_CAP_ZONE], true, 5000, 10000)
end
--FIN-------------------------------------------------------------------------------------------------------------------------------------------------------------
--↓↓ SUPPORT SPAWN ↓↓---------------------------------------------------------------------------------------------------------------------------------------------
BAI_PlanesLIST = {
    'BAI_F14',
    'BAI_AV8B',
    'BAI_F15',
    'BAI_A10',
    'BAI_F18',
    'BAI_M2000',
    'BAI_F16'
}

SEAD_PlanesLIST = {
    'SEAD_AV8B',
    'SEAD_F18',
    'SEAD_JF17',
    'SEAD_F16'
}

AS_PlanesLIST = {
    'AS_F18',
    'AS_JF17',
    'AS_JAS37',
    'AS_SU34'
}

function BLUE_BAI()
    BAI_PLANESSPAWN =
        SPAWN:NewWithAlias('BLUE_CAS_TMP', 'ALLIED BAI PATROL'):InitRandomizeTemplate(BAI_PlanesLIST):InitRandomizeRoute(
        1,
        2,
        20000
    ):InitCleanUp(60):InitHeading(120, 180):InitSkill('Random'):InitLimit(2, 0)

    local BLUERNG_CAP_ZONE = math.random(1, #(AlliedCAPZoneList))
    BAI_PLANESSPAWN:SpawnInZone(AlliedCAPZoneList[BLUERNG_CAP_ZONE], true, 5000, 10000)
end


function BLUE_SEAD()
    SEAD_PLANESSPAWN =
        SPAWN:NewWithAlias('BLUE_SEAD_TMP', 'ALLIED SEAD PATROL'):InitRandomizeTemplate(SEAD_PlanesLIST):InitRandomizeRoute(
        1,
        2,
        20000
    ):InitCleanUp(60):InitHeading(120, 180):InitSkill('Random'):InitLimit(2, 0)

    local BLUERNG_CAP_ZONE = math.random(1, #(AlliedCAPZoneList))
    SEAD_PLANESSPAWN:SpawnInZone(AlliedCAPZoneList[BLUERNG_CAP_ZONE], true, 5000, 10000)
end

function BLUE_AS()
    AS_PLANESSPAWN =
        SPAWN:NewWithAlias('BLUE_AS_TMP', 'ALLIED ANTI SHIP PATROL'):InitRandomizeTemplate(AS_PlanesLIST):InitRandomizeRoute(
        1,
        2,
        20000
    ):InitCleanUp(60):InitHeading(120, 180):InitSkill('Random'):InitLimit(2, 0)

    local BLUERNG_CAP_ZONE = math.random(1, #(AlliedCAPZoneList))
    AS_PLANESSPAWN:SpawnInZone(AlliedCAPZoneList[BLUERNG_CAP_ZONE], true, 5000, 10000)
end
--FIN---------------------------------------------------------------------------------------------------------------------------------------------------------------

function DesactivarRadioAmbienteAA()
  if (RadioAmbienteActivada_AA == 0) then
      RadioAmbienteActivada_AA = 1
      trigger.action.outText('A2A kills comms are now Enabled', 15)
  elseif (RadioAmbienteActivada_AA == 1) then
      RadioAmbienteActivada_AA = 0
      trigger.action.outText('A2A kills comms are now Disabled', 15)
  else
  end
end

function DesactivarRadioAmbienteAG()
  if (RadioAmbienteActivada_AG == 0) then
      RadioAmbienteActivada_AG = 1
      trigger.action.outText('A2G kills comms are now Enabled', 15)
  elseif (RadioAmbienteActivada_AG == 1) then
      RadioAmbienteActivada_AG = 0
      trigger.action.outText('A2G kills comms are now Disabled', 15)
  else
  end
end

function CurrentMissionSettings()
  if (enable_A2G_tasking == true) then
      trigger.action.outText('A2G tasking system: ✔', 20)
  end
  if (enable_MissileTrainer == true) then
      trigger.action.outText('FOX Missile trainer: ✔', 20)
  end
  if (enable_ExtraDamage == true) then
      trigger.action.outText('Extra Damage: ✔', 20)
  end
  if (enable_AirTraffic == true) then
    trigger.action.outText('Random Air Traffic: ✔', 20)
end
  if (enable_CTDL == true) then
      trigger.action.outText('CTDL: ✔', 20)
  end
  if (enable_CSAR == true) then
      trigger.action.outText('CSAR: ✔', 20)
  end
  if (enable_ZEUS == true) then
      trigger.action.outText('ZEUS: ✔', 20)
  end
  if (enable_RescueHelos == true) then
      trigger.action.outText('Rescue Helos: ✔', 20)
  end
  if (allow_EndMissionViaRadio == true) then
      trigger.action.outText('You can finish the mission with the radio', 20)
  end
  if (allow_CallSupportViaRadio == true) then
      trigger.action.outText('You can spawn support planes via radio', 20)
  end
  if (allow_SpawnRedCAPs == true) then
    trigger.action.outText('You can spawn enemy CAPs via radio', 20)
  end
  if (allow_ManualTaskCreation == true) then
      trigger.action.outText('You can create A2G tasks manually via radio', 20)
  end
end

function CurrentCAPSettings()
  if (Enable_CAT_Squadron == true) then
      trigger.action.outText('Enemy CAT Squadron: ✔', 20)
  end
  if (Enable_BEAR_Squadron == true) then
      trigger.action.outText('Enemy BEAR Squadron: ✔', 20)
  end
  if (Enable_TIGER_Squadron == true) then
      trigger.action.outText('Enemy TIGER Squadron: ✔', 20)
  end
  if (Enable_BOMBER_Squadrons == true) then
    trigger.action.outText('Enemy Bomber SQUADRON: ✔', 20)
end
  if (Enable_FALCON_Squadron == true) then
      trigger.action.outText('Allied FALCON Squadron: ✔', 20)
  end
  if (Enable_HAWK_Squadron == true) then
      trigger.action.outText('Allied HAWK Squadron: ✔', 20)
  end
  if (Enable_EAGLE_Squadron == true) then
      trigger.action.outText('Allied EAGLE Squadron: ✔', 20)
  end
  if (Enable_CAT_Squadron == false) and (Enable_BEAR_Squadron == false) and (Enable_TIGER_Squadron == false) then
    trigger.action.outText('Enemy CAPs are turned OFF', 20)
  end
  if (Enable_FALCON_Squadron == false) and (Enable_HAWK_Squadron == false) and (Enable_EAGLE_Squadron == false) then
    trigger.action.outText('Allied CAPs are turned OFF', 20)
  end
end



function ENDMISSIONTRIGGER()
  trigger.action.setUserFlag(50, 5)
end

function ENDMISSIONTRIGGERNO()
  trigger.action.outText('Ok then...', 15)
end


trigger.action.outText("▁ ▂ ▄ ▅ ▆ ▇ █ ROTORS AND RUST █ ▇ ▆ ▅ ▄ ▂ ▁", 30)
trigger.action.outText("CHECK YOUR MISSION CONFIG VIA RADIO MENU: Mission Options > Current Mission Settings & Mission Options > Active SQDN List -", 30)
trigger.action.outText("*** ONLY DESTROY GROUND UNITS THAT YOU HAVE AN ACTIVE TASKING FOR ***", 30)